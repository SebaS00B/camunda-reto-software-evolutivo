<!-- File: src/main/resources/templates/reports/dashboard.html -->
<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reportes Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container">
    <a class="navbar-brand" th:href="@{/process/dashboard}">BPM Consultant</a>
  </div>
</nav>
<div class="container mt-4">
    <h3>ðŸ“Š Reportes Dashboard</h3>
    <div class="row mt-3">
        <div class="col-md-4">
            <div class="card text-center mb-3">
                <div class="card-body">
                    <h5>Total Solicitudes</h5>
                    <p th:text="${metrics.totalRequests}"></p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center mb-3">
                <div class="card-body">
                    <h5>Pendientes</h5>
                    <p th:text="${metrics.pendingRequests}"></p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center mb-3">
                <div class="card-body">
                    <h5>Aprobadas</h5>
                    <p th:text="${metrics.approvedRequests}"></p>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <div class="card text-center mb-3">
                <div class="card-body">
                    <h5>Rechazadas</h5>
                    <p th:text="${metrics.rejectedRequests}"></p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center mb-3">
                <div class="card-body">
                    <h5>Tiempo Promedio (h)</h5>
                    <p th:text="${metrics.averageProcessingTime}"></p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center mb-3">
                <div class="card-body">
                    <h5>Solicitudes Vencidas</h5>
                    <p th:text="${metrics.overdueRequests}"></p>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="card mb-3">
                <div class="card-header">Monto Total Aprobado</div>
                <div class="card-body">
                    <h4 th:text="${metrics.totalApprovedAmount}"></h4>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-3">
                <div class="card-header">DistribuciÃ³n por CategorÃ­a</div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item" th:each="cat : ${metrics.categoryDistribution}">
                        <span th:text="${cat.category}"></span> - <strong th:text="${cat.count}"></strong> (<span th:text="${cat.percentage}"></span>%)
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="card mb-3">
                <div class="card-header">DistribuciÃ³n por Departamento</div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item" th:each="dep : ${metrics.departmentDistribution}">
                        <span th:text="${dep.department}"></span> - <strong th:text="${dep.count}"></strong> (<span th:text="${dep.percentage}"></span>%)
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-3">
                <div class="card-header">Tareas Pendientes por Usuario</div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item" th:each="user : ${metrics.userTasks}">
                        <span th:text="${user.userName}"></span> - <strong th:text="${user.taskCount}"></strong>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>
