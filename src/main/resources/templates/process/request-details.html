<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Detalles de Solicitud [[${request.businessKey}]]</title>
  <link 
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" 
    rel="stylesheet"/>
</head>
<body class="p-4">
  <div class="container">
    <div class="card p-4 mb-4 bg-white">
      <h2 class="mb-3">Solicitud <span class="text-primary">[[${request.businessKey}]]</span></h2>
      <div class="row">
        <div class="col-md-6">
          <dl>
            <dt>ID</dt>
            <dd>[[${request.id}]]</dd>
            <dt>Estado</dt>
            <dd>[[${request.status.displayName}]]</dd>
            <dt>Solicitante</dt>
            <dd>[[${request.requesterName}]] &lt;[[${request.requesterEmail}]]&gt;</dd>
            <dt>Departamento</dt>
            <dd>[[${request.department}]]</dd>
            <dt>Fecha Creación</dt>
            <dd th:text="${#temporals.format(request.createdAt,'dd/MM/yyyy HH:mm')}">—</dd>
            <dt>Fecha Vencimiento</dt>
            <dd th:text="${#temporals.format(request.dueDate,'dd/MM/yyyy HH:mm')} ?: '—'">—</dd>
          </dl>
        </div>
        <div class="col-md-6">
          <dl>
            <dt>Descripción</dt>
            <dd>[[${request.description}]]</dd>
            <dt>Monto</dt>
            <dd>[[${request.formattedAmount}]]</dd>
            <dt>Categoría</dt>
            <dd>[[${request.category.displayName}]]</dd>
            <dt>Prioridad</dt>
            <dd>[[${request.priority.displayName}]]</dd>
            <dt>Ruta Aprobación</dt>
            <dd>[[${request.approvalRoute} ?: '—']]</dd>
            <dt>Tiempo Proc. (h)</dt>
            <dd>[[${request.processingTimeHours} ?: '—']]</dd>
          </dl>
        </div>
      </div>

      <hr/>

      <div class="row">
        <div class="col-md-4">
          <h5>Proveedor</h5>
          <p>[[${request.supplierName}]]<br/>
             <small class="text-muted" th:if="${request.supplierEmail}">&lt;[[${request.supplierEmail}]]&gt;</small>
          </p>
        </div>
        <div class="col-md-4">
          <h5>Aprobación</h5>
          <p>Por: [[${request.approvedBy} ?: '—']]<br/>
             En: <span th:text="${#temporals.format(request.approvedAt,'dd/MM/yyyy HH:mm')} ?: '—'">—</span>
          </p>
        </div>
        <div class="col-md-4">
          <h5>Rechazo</h5>
          <p>Razón: [[${request.rejectionReason} ?: '—']]<br/>
             Recordatorios: [[${request.reminderCount}]]
          </p>
        </div>
      </div>

      <div class="text-end">
        <a href="/process/dashboard" class="btn btn-outline-secondary">← Volver</a>
      </div>
    </div>
  </div>
</body>
</html>
